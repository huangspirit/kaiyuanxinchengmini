<!--pages/shopCart/shopCart.wxml-->
<wxs src="../../utils/filter.wxs" module="filter" />
<view class="shoppingCart" wx:if="{{cartList.length>0}}">
  <view class="cartTop">
    <view><image src="../../img/home/gouwuchedianji.png"></image></view>
    <text bindtap="editGoods">{{editText}}</text>
  </view>

  <view class="shopList">
    <view class="listContent {{!item.isenable?'listNosell':''}}" wx:for="{{cartList}}" wx:key="index" wx:for-item="item" wx:for-index="index">
      <view class="shopSeller">
        <view class='action-checkbox' bindtap="subChecked" data-index="{{index}}">
          <image  src="{{item.checked?'../../img/image/xuanzhong.png':'../../img/image/weixuanzhong.png'}}"></image>
        </view>
        <view class="cu-avatar lg round margin-left margin-right">
          <image style="width:100%;height:100%;border-radius:100%;" src="{{item.sellerUrl}}"></image>
        </view>
        <text>{{item.sellerName}}</text>
      </view>
      <view class="{{subItem.isenable?'':''}}sellerList" wx:for="{{item.list}}" wx:for-item="subItem" wx:for-index="k" wx:key="k">
        <view class='action-checkbox' bindtap="sonChecked" data-k="{{k}}" data-index="{{index}}">
          <image  wx:if="{{subItem.isenable}}" src="{{subItem.checked ?'../../img/image/xuanzhong.png':'../../img/image/weixuanzhong.png'}}"></image>
          <image  wx:if="{{!subItem.isenable}}" src="../../img/image/weixuanzhong.png"></image>
        </view>
      <view class="listDetail">
        <view class="listLeft">
          <image src="{{subItem.goodsImageUrl?subItem.goodsImageUrl:errorImg}}"></image>
        </view>
        <view class="listRight">
          <view class="name color">{{subItem.goods_name}}</view>
          <view class="desc gray">{{subItem.goodsDesc}}</view>
          <view class="mark">{{subItem.diliverPlace}}发货</view>
          <view class="goodsPrice color">
            <text>
              {{subItem.priceUnit?'$':'￥'}} {{filter.toFixed(subItem.goodsPrice,subItem.priceUnit?3:2)}}
            </text>
            <view>
              <button class='cu-btn' disabled="{{subItem.delbtnShow}}" bindtap="delGoodsNum" data-index="{{index}}" data-k="{{k}}">-</button>
              <input class='ca-sum' name='input' value="{{subItem.goodsNum}} " bindblur="inputNum"  data-index="{{index}}" data-k="{{k}}"></input>
              <button class='cu-btn' disabled="{{subItem.addbtnShow}}" bindtap="addGoodsNum" data-index="{{index}}" data-k="{{k}}">+</button>
            </view>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>
</view>
<view class="shopFooter " wx:if="{{cartList.length>0&&!editgoodsShow}}">
  <view class="footerLeft">
    <view>
      <view class='action-checkbox'>
        <image bindtap="allChecked" src="{{allChecked?'../../img/image/xuanzhong.png':'../../img/image/weixuanzhong.png'}}"></image>
      </view>
      全选
    </view>
    <text>总计：￥{{filter.toFixed(unAllPrice,2)}}+${{filter.toFixed(usAllPrice,3)}}</text>
  </view>
  <view class="{{payBtnShow?'footerRight':'footerRightsub'}}" bindtap="{{payBtnShow?'toPay':''}}">
    <text>结算</text>
    <text>({{goodsAllNum}}件)</text>
  </view>
</view>
<view class="shopFooter1" wx:if="{{editgoodsShow}}">
  <view class="footerLeft">
    <view>
      <view class='action-checkbox'>
        <image bindtap="allChecked" wx:if="{{allChecked}}" src="../../img/image/xuanzhong.png"></image>
        <image bindtap="allChecked" wx:else src="../../img/image/weixuanzhong.png"></image>
      </view>
      全选
    </view>
  </view>
  <view class="footerRight">
    <text bindtap="delete">删除</text>
    <text bindtap="addFocus">移至收藏</text>
  </view>
</view>
<view class="shopingCarEmpty" wx:if="{{cartList.length<=0}}">
  <image src="../../img/image/gouwuchekong.png"></image>
  <view>购物车空空如也，
    <text bindtap="tohome">去逛逛</text>吧 ~
  </view>
  
</view>
<dialog id="dialog" bind:cancelEvent="popupCancel" bind:confirmEvent="popupConfirm" cancelText="不需要" confirmText="合并报关" hasConfirm="{{true}}" title="提示">
    <view slot="content" class="section">
     <text>由于您选择了多种美元商品，是否需要合并报关？</text>
    </view>
  </dialog>